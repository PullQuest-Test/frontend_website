name: 🏷️ Auto-Label PR with Connected Issue

on:
  pull_request:
    types: [opened]

jobs:
  label-pr-with-issue:
    runs-on: ubuntu-latest
    
    steps:
      - name: 🏷️ Add Issue Label to PR
        run: |
          echo "🚀 Starting issue label workflow for PR #${{ github.event.pull_request.number }}"
          
          curl -X POST "https://pullquestgithubbackend.onrender.com/api/github/label-pr-with-issue" \
            -H "Content-Type: application/json" \
            -d '{
              "owner": "${{ github.repository_owner }}",
              "repo": "${{ github.event.repository.name }}",
              "prNumber": ${{ github.event.pull_request.number }},
              "prTitle": "${{ github.event.pull_request.title }}",
              "prBody": "${{ github.event.pull_request.body }}",
              "prUrl": "${{ github.event.pull_request.html_url }}"
            }'
